schemaVersion: 2.2.0
metadata:
  name: recipeUI
components:
  - name: ui-docker
    image:
      imageName: ui-docker-image
      dockerfile:
        buildContext: ./recipe-webUI/
        uri: ./recipe-webUI/Dockerfile
  - name: ui-container
    attributes:
        deployment/replicas: 1
        deployment/cpuLimit: "100m"
        deployment/cpuRequest: 10m
        deployment/memoryLimit: 100Mi
        deployment/memoryRequest: 50Mi
        deployment/container-port: 8080
    container:
      image: ui-docker-image
      endpoints:
        - name: http
          targetPort: 8080
          exposure: public
          protocol: http
commands:
  - id: build-image
    apply:
      component: ui-docker
  - id: run-container
    apply:
      component: ui-container
  - id: deploy
    composite:
      commands:
        - build-image
        - run-container
      group:
        kind: deploy
        isDefault: true